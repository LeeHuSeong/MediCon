<?xml version="1.0" encoding="UTF-8"?>
<!-- 진료의뢰서 -->
<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<AnchorPane minHeight="800" minWidth="800.0" style="-fx-background-color: white;"
            stylesheets="@../../../../style/ComponentStyle.css" xmlns="http://javafx.com/javafx/21"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.medicon.medicon.controller.medic.form.ReferralFormController">

    <VBox prefHeight="800.0" prefWidth="1400.0" spacing="10">
        <Label maxWidth="Infinity" styleClass="section-title" text="진료의뢰서" />

        <GridPane hgap="10" vgap="10" VBox.vgrow="ALWAYS">

            <!-- row 0: 차트번호, 의뢰번호, 의뢰일 -->
            <Label text="차트번호" styleClass="form-labelBig" GridPane.columnIndex="0" GridPane.rowIndex="0" GridPane.halignment="RIGHT"/>
            <TextField fx:id="chartNumberField" disable="true" GridPane.columnIndex="1" GridPane.rowIndex="0"/>
            <Label text="의뢰번호" styleClass="form-labelBig" GridPane.columnIndex="2" GridPane.rowIndex="0" GridPane.halignment="RIGHT"/>
            <TextField fx:id="referralNumberField" GridPane.columnIndex="3" GridPane.rowIndex="0"/>

            <Label text="의뢰일자" styleClass="form-labelBig" GridPane.columnIndex="0" GridPane.rowIndex="1" GridPane.halignment="RIGHT"/>
            <DatePicker fx:id="referralDatePicker" GridPane.columnIndex="1" GridPane.rowIndex="1"/>

            <!-- row 2: 환자 정보 -->
            <Label text="환자 성명" styleClass="form-labelBig" GridPane.columnIndex="0" GridPane.rowIndex="2" GridPane.halignment="RIGHT"/>
            <TextField fx:id="nameField" GridPane.columnIndex="1" GridPane.rowIndex="2"/>
            <Label text="주민등록번호" styleClass="form-labelBig" GridPane.columnIndex="2" GridPane.rowIndex="2" GridPane.halignment="RIGHT"/>
            <TextField fx:id="rrnField" promptText="######-#######" GridPane.columnIndex="3" GridPane.rowIndex="2"/>

            <!-- row 3: 성별, 연락처 -->
            <Label text="성별" styleClass="form-labelBig" GridPane.columnIndex="0" GridPane.rowIndex="3" GridPane.halignment="RIGHT"/>
            <HBox spacing="20" GridPane.columnIndex="1" GridPane.rowIndex="3">
                <RadioButton fx:id="maleRadio" text="남자" toggleGroup="$genderGroup" selected="true"/>
                <RadioButton fx:id="femaleRadio" text="여자" toggleGroup="$genderGroup"/>
            </HBox>
            <Label text="연락처" styleClass="form-labelBig" GridPane.columnIndex="2" GridPane.rowIndex="3" GridPane.halignment="RIGHT"/>
            <TextField fx:id="phoneNumField" GridPane.columnIndex="3" GridPane.rowIndex="3"/>

            <!-- row 4: 주소 -->
            <Label text="주소" styleClass="form-labelBig" GridPane.columnIndex="0" GridPane.rowIndex="4" GridPane.halignment="RIGHT"/>
            <TextField fx:id="addressField" GridPane.columnIndex="1" GridPane.rowIndex="4" GridPane.columnSpan="3"/>

            <!-- row 5: 원발병원 정보 -->
            <Label text="병원명(발신)" styleClass="form-labelBig" GridPane.columnIndex="0" GridPane.rowIndex="5" GridPane.halignment="RIGHT"/>
            <TextField fx:id="hospitalNameField" GridPane.columnIndex="1" GridPane.rowIndex="5"/>
            <Label text="병원 연락처" styleClass="form-labelBig" GridPane.columnIndex="2" GridPane.rowIndex="5" GridPane.halignment="RIGHT"/>
            <TextField fx:id="hospitalPhoneNumField" GridPane.columnIndex="3" GridPane.rowIndex="5"/>

            <!-- row 6: 의뢰자 정보 -->
            <Label text="소속 과/부서" styleClass="form-labelBig" GridPane.columnIndex="0" GridPane.rowIndex="6" GridPane.halignment="RIGHT"/>
            <TextField fx:id="departmentField" GridPane.columnIndex="1" GridPane.rowIndex="6"/>
            <Label text="의뢰자 직위" styleClass="form-labelBig" GridPane.columnIndex="2" GridPane.rowIndex="6" GridPane.halignment="RIGHT"/>
            <TextField fx:id="referrerPositionField" GridPane.columnIndex="3" GridPane.rowIndex="6"/>

            <!-- row 7: 수신자 정보 -->
            <Label text="수신 기관명" styleClass="form-labelBig" GridPane.columnIndex="0" GridPane.rowIndex="7" GridPane.halignment="RIGHT"/>
            <TextField fx:id="receiverInstitutionField" GridPane.columnIndex="1" GridPane.rowIndex="7"/>
            <Label text="수신 부서/의사" styleClass="form-labelBig" GridPane.columnIndex="2" GridPane.rowIndex="7" GridPane.halignment="RIGHT"/>
            <TextField fx:id="receiverDeptField" GridPane.columnIndex="3" GridPane.rowIndex="7"/>

            <Label text="수신 연락처" styleClass="form-labelBig" GridPane.columnIndex="0" GridPane.rowIndex="8" GridPane.halignment="RIGHT"/>
            <TextField fx:id="receiverPhoneField" GridPane.columnIndex="1" GridPane.rowIndex="8"/>

            <!-- row 9: 검사결과 요약 -->
            <Label text="검사결과 요약" wrapText="true" styleClass="form-labelBig" GridPane.columnIndex="0" GridPane.rowIndex="9" GridPane.halignment="RIGHT"/>
            <TextArea fx:id="testResultsField" GridPane.columnIndex="1" GridPane.rowIndex="9" GridPane.columnSpan="3" prefRowCount="3" wrapText="true"/>

            <!-- row 10: 복용약물 -->
            <Label text="복용 중인 약물" wrapText="true" styleClass="form-labelBig" GridPane.columnIndex="0" GridPane.rowIndex="10"
                   GridPane.halignment="RIGHT" textAlignment="RIGHT"/>
            <TextArea fx:id="medicationsField" GridPane.columnIndex="1" GridPane.rowIndex="10" GridPane.columnSpan="3" prefRowCount="2" wrapText="true"/>

            <!-- row 11: 의뢰 목적 및 사유 -->
            <Label text="의뢰 목적/사유" wrapText="true" styleClass="form-labelBig" GridPane.columnIndex="0" GridPane.rowIndex="11"
                   GridPane.halignment="RIGHT" textAlignment="RIGHT"/>
            <TextArea fx:id="purposeField" GridPane.columnIndex="1" GridPane.rowIndex="11" GridPane.columnSpan="3" prefRowCount="3" wrapText="true"/>

            <!-- row 12: 첨부물 -->
            <Label text="첨부자료" wrapText="true" styleClass="form-labelBig" GridPane.columnIndex="0" GridPane.rowIndex="12" GridPane.halignment="RIGHT"/>
            <TextField fx:id="attachmentsField" GridPane.columnIndex="1" GridPane.rowIndex="12" GridPane.columnSpan="3"/>

            <!-- column 설정 -->
            <columnConstraints>
                <ColumnConstraints percentWidth="13"/>
                <ColumnConstraints percentWidth="35"/>
                <ColumnConstraints percentWidth="20"/>
                <ColumnConstraints percentWidth="35"/>
            </columnConstraints>
            <VBox.margin>
                <Insets left="20.0" right="20.0"/>
            </VBox.margin>

        </GridPane>

        <HBox alignment="BOTTOM_RIGHT" prefHeight="96.0" prefWidth="600.0" spacing="10">
            <Button onAction="#handlePrintPreview" styleClass="button-lightblue" text="미리보기" />
            <Button onAction="#handleSave" styleClass="button-blue" text="저장" />
            <Button onAction="#handleClose" styleClass="button-gray" text="닫기" />
            <padding>
                <Insets bottom="10.0" right="10.0" />
            </padding>
        </HBox>
    </VBox>
</AnchorPane>
